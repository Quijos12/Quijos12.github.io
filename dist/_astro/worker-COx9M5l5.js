(function(){"use strict";function c(t,n){return Math.random()*(n-t)+t}function u(t,n){return Math.floor(c(t,n))}function w(t,n,i){const[o,h]=n,[l,z]=i;return(t-o)*(z-l)/(h-o)+l}let f=[],a=[0,0],M=30,x="rgb(255, 255, 255)",r,e,s=1,d=p(),m=!1,A;const D=[.5,2],T=[.2,.7],y=[-10,10],g=.1;function p(){return"performance"in self?performance.now():Date.now()}function R(){return{position:[u(0,a[0]),u(0,a[1])],speed:[c(...y),c(...y)],targetAlpha:c(...T),size:u(...D),alpha:0}}function _({position:t,size:n}){const[i,o]=t,h=i<-n||i>a[0]+n,l=o<-n||o>a[1]+n;return h||l}function b(t){e.clearRect(0,0,a[0],a[1]),e.setTransform(s,0,0,s,0,0),f=f.map((n,i)=>{if(m&&(n.alpha-=g*2*t,n.alpha<=0))return R();const[o,h]=n.position,l=[o-n.size,a[0]-o-n.size,h-n.size,a[1]-h-n.size],z=w(Math.min(...l),[0,20],[0,1]),P=Number(Math.max(z,0).toFixed(2));P>1?(n.alpha+=g*t,n.alpha=Math.min(n.alpha,n.targetAlpha)):n.alpha=n.targetAlpha*P;const[O,S]=n.speed;return n.position[0]+=O*t,n.position[1]+=S*t,n.alpha<n.targetAlpha&&(n.alpha+=g*t,n.alpha=Math.min(n.alpha,n.targetAlpha)),_(n)?R():(F(n),n)})}function F(t){const[n,i]=t.position;e.beginPath();const o=e.globalAlpha;e.arc(n,i,t.size,0,2*Math.PI),e.fillStyle=x,e.globalAlpha=t.alpha,e.fill(),e.globalAlpha=o}function I(t){a=[r.width,r.height],M=parseInt(t.data.quantity),x=t.data.color,f=Array.from({length:M},R),e.canvas.width=a[0],e.canvas.height=a[1],e.scale(s,s),A&&cancelAnimationFrame(A),E()}function N(t){m=!1,a=[t.data.width,t.data.height],r.width=a[0]*s,r.height=a[1]*s}function L(){m=!0}function H(t){r=t.data.canvas,e=r.getContext("2d"),s=t.data.pixelRatio,e.scale(s,s)}function E(){const t=p(),n=(t-d)/1e3;d=t,b(n),A=requestAnimationFrame(E)}d=p(),self.onmessage=t=>{const n={setup:H,init:I,"on-resize":L,resize:N},i=t.data.type,o=n[i];o(t)}})();
